# SSH 學習筆記

###### tags: `技術`


## 資源

[你該知道所有關於 SSH 的那些事](https://jennycodes.me/posts/security-ssh)
[Man-in-the-middle_attack](https://en.wikipedia.org/wiki/Man-in-the-middle_attack)

## 名詞

SSH (Secure Shell) 是一種連線加密機制

## 機制

每個人都有兩把鑰匙(public key 公鑰 / private key 私鑰)，並且可取得其他人的公鑰

* 公鑰是公開的，私鑰要藏起來
* 私鑰拿來 **簽名** 與 **解密**
* 公鑰是給**別人確認**是你的簽名 & 提供**給別人加密**

> 記憶點: 私鑰像是有家徽的一把鑰匙筆，公鑰是上頭有家徽的含鎖盒子
> 用鑰匙筆簽名完後，放進去別人家的盒子(別人公鑰)；對方收到後，用自己的私鑰打開，取出內容物後，檢查簽名家徽與(另外拿到)我方的盒子上的家徽，確認是我方寄的

e.g. 小明要傳訊息給小美

1. 小明用自己的**私鑰簽名** <- 這包東西是小明的
2. 小明用小美的**公鑰加密** <- 這是XX@#$%, 只有小美的私鑰可以解開
3. 把這包東西丟給小美
4. 小美用自己的**私鑰解密** <- 這包東西是OOO的
5. 小美用小明的**公鑰確認**是誰的 <- 這包東西是小明的


## 中間人攻擊

必須先讓雙方都知道對方的公鑰，才能成立互動。
但是如果公鑰被**中間人偷走**，就會變成中間人可以竄改雙方的訊息

e.g. 小明要傳訊息給小美，雙方第一次合作，不曉得對方的公鑰

小明 - 小三 - 小美

1. 小明 [請給我公鑰]-> 小三 -> 小美
2. 小明 <- 小三 <- [**小美的公鑰**] 小美
3. 小明 [**小三的公鑰**] <- 小三 <- 小美 // 小明**以為收到**小美公鑰
4. 小明 [用**小三的公鑰**加密:我喜歡你] -> 小三 -> 小美
5. 小明 -> 小三[用**小三私鑰**解密, 拿到訊息後竄改並用**小美公鑰**加密:我討厭你] -> 小美
6. 小明 -> 小三 -> 小美[用小美私鑰解密,得到:我討厭你]




